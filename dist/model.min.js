!function(a,b){"object"==typeof exports?module.exports=b():"function"==typeof define&&define.amd?define([],b):a.Model=b()}(this,function(){function a(){function a(a,b){"string"==typeof a?e(a,b):d(a)}function d(a){Object.keys(a).forEach(function(b){e(b,a[b])})}function e(a,b){m[a]=b,l[a]&&l[a].forEach(function(a){a()})}function f(a){return m[a]}function g(){var a=[];return function d(e,g,h){e instanceof Array||(e=[e]);var j=b(function(){var a=e.map(f);c(a)&&g.apply(h,a)});return j(),e.forEach(function(b){i(b,j),a.push({property:b,fn:j})}),{when:d,callbacks:a}}}function h(a){a.callbacks.forEach(function(a){j(a.property,a.fn)})}function i(a,b){l[a]||(l[a]=[]),l[a].push(b)}function j(a,b){l[a]=l[a].filter(function(a){return a!==b})}var k={set:a,get:f,when:function(a,b,c){return g()(a,b,c)},cancel:h},l={},m={};return k}function b(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1,a()},0))}}function c(a){return!a.some(function(a){return"undefined"==typeof a||null===a})}return a});